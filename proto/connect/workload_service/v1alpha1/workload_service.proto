// Copyright 2025 Cofide Limited.
// SPDX-License-Identifier: Apache-2.0

syntax = "proto3";

package proto.connect.workload_service.v1alpha1;

import "proto/workload/v1alpha1/workload.proto";

option go_package = "github.com/cofide/cofide-api-sdk/gen/go/proto/connect/workload_service/v1alpha1";

service WorkloadObservationService {
  rpc PublishWorkloadEvents(stream PublishWorkloadEventsRequest) returns (PublishWorkloadEventsResponse);
  rpc ObserveWorkloadEvents(ObserveWorkloadEventsRequest) returns (stream ObserveWorkloadEventsResponse);
}

message PublishWorkloadEventsRequest {
  proto.workload.v1alpha1.Workload workload = 1;
}

message ObserveWorkloadEventsResponse {
  proto.workload.v1alpha1.Workload workload = 1;
}

message PublishWorkloadEventsResponse {
  optional string message = 1;
}

message ObserveWorkloadEventsRequest {
  message StreamFilter {
    optional string namespace = 1;
    optional string cluster_id = 2;
    map<string, string> label_selector = 3;
    optional string trust_zone_id = 4;
  }
  optional StreamFilter filter = 1;
}

