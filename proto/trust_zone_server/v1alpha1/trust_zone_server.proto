// Copyright 2026 Cofide Limited.
// SPDX-License-Identifier: Apache-2.0

syntax = "proto3";

package proto.trust_zone_server.v1alpha1;

import "google/api/field_behavior.proto";
import "google/api/resource.proto";

option go_package = "github.com/cofide/cofide-api-sdk/gen/go/proto/trust_zone_server/v1alpha1";

// TrustZoneServer defines how the server managing a trust zone should be deployed.
message TrustZoneServer {
  option (google.api.resource) = {
    type: "proto.trust_zone_server.v1alpha1/TrustZoneServer"
    pattern: "{trust_zone_server}"
  };
  // The unique ID of the server. Generated by the server.
  string id = 1 [(google.api.field_behavior) = IDENTIFIER];
  // Trust Zone managed by this server.
  // Immutable after creation.
  string trust_zone_id = 2 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.field_behavior) = IMMUTABLE,
    (google.api.resource_reference).type = "proto.trust_zone.v1alpha1/TrustZone"
  ];
  // Cluster in which the server should be deployed.
  // Immutable after creation.
  string cluster_id = 3 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.field_behavior) = IMMUTABLE,
    (google.api.resource_reference).type = "proto.cluster.v1alpha1/Cluster"
  ];
  // Kubernetes namespace in which the server should be deployed. If not provided the API service should set this.
  string kubernetes_namespace = 4 [(google.api.field_behavior) = OPTIONAL];
  // Name of kubernetes service account to deploy with the server. If not provided the API service should set this.
  string kubernetes_service_account = 5 [(google.api.field_behavior) = OPTIONAL];
  // Organization to which the server belongs. Derived from the trust zone by the API service.
  string org_id = 6 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (google.api.field_behavior) = IMMUTABLE,
    (google.api.resource_reference).type = "proto.organization.v1alpha1/Organization"
  ];
}
